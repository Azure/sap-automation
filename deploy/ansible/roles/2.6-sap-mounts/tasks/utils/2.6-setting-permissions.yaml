---
- name:                                "2.6 SAP Mounts: - Set permissions"
  when:                                 node_tier == "hana"
  block:
    - name:                            "2.6 SAP Mounts: - Set permissions on hana folders"
      ansible.builtin.file:
        owner:                         "{{ db_sid | lower }}adm"
        group:                         sapsys
        state:                         directory
        recurse:                       true
        path:                          "{{ item.path }}"
        mode:                          '{{ item.mode }}'
      loop:
        - { mode: '0755', path: "{{ hana_data_basepath }}" }
        - { mode: '0755', path: "{{ hana_log_basepath }}" }
        - { mode: '0755', path: '/hana/shared' }
  rescue:
    - name:                            "2.6 SAP Mounts: - Set permissions on hana folders"
      ansible.builtin.file:
        owner:                         '{{ hdbadm_uid }}'
        group:                         sapsys
        state:                         directory
        recurse:                       true
        path:                          "{{ item.path }}"
        mode:                          '{{ item.mode }}'
      loop:
        - { mode: '0755', path: "{{ hana_data_basepath }}" }
        - { mode: '0755', path: "{{ hana_log_basepath }}" }
        - { mode: '0755', path: '/hana/shared' }
