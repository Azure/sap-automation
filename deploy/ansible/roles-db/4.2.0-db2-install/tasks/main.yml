# /*-----------------------------------------------------------------------------------------------------8
# |                                                                                                                                         |
# |                 Perform the DB2 Instance installation                                                           |
# |                  SAP: Register BOM                                                                                       |
# |                  SAP DB2 :  create .params directory                                                             |
# |                  Export  environment variables for DB2 Installation                                      |
# |                  Run SWPM to Install DB2                                                                             |
# |                   TODO; Mention any OSS notes here                                                            |
# |                                                                                                                                          |
# +------------------------------------4--------------------------------------------------------------- */

# TODO: Considerations

---

- name:                               "DB2:  Single Instance Installation "
  import_tasks:                     4.2.0.1-db2_single_instance_install.yml
  when:                                 db_high_availability == false    


- name:                                 "DB2:  High Availability  Installation"
  block:

    - name:                              "DB2:  High Availability  Installation on Primary "
      import_tasks:                   4.2.0.2-db2_ha_install_primary.yml

    - name:                              "DB2:  Create  backup of Primary DB after Install"
      import_tasks:                   4.2.0.3-db2_primary_backup.yml 
              
    - name:                             "DB2:  High Availability  Installation on Secondary Using Backup/Restore"
      import_tasks:                   4.2.0.4-db2_ha_install_secondary.yml

    - name:                               "DB2:  Restore Standby/Secondary with the backup of Primary"
      import_tasks:                    4.2.0.5-db2_restore_secondary.yml

  when:                                   db_high_availability == true