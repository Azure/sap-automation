---

# /*---------------------------------------------------------------------------8
# | Creating the Standby using RMAN Duplicate  command                         |
# |                                                                            |
# |                                                                            |
# | Step 1 create the SQL scripts for DG                                       |
# +------------------------------------4--------------------------------------*/

# Set Primary and Secondary node names.
- name:                        "Setting the priamry and Secondary DB names"
  ansible.builtin.set_fact:
            ora_primary:           "{{ ansible_play_hosts_all[0] }}"         # Oracle Primary Host
            ora_secondary:         "{{ ansible_play_hosts_all[1] }}"         # Oracle Secondary Host
            current_host:                  "{{ ansible_hostname }}"

#Check if tnsping is working to reach Primary  databases from Secondary.

- name:                           "Check TNS Ping"
  become:
  become-user:                    "oracle"
  ansible.builtin.shell: |
                                  tnsping  {{ ora_primary }} |tee /oracle/sap_primary.log
  register:                            oratnsping_results
  failed_when:                         oraprecheck_results.rc >= 1
  environment:
  args:
    executable:                        /bin/bash       


